-- Updated dump.sql matching Supabase definitions (2025)
-- Tables, indexes, sample data and RPC functions

-- === TABLES ===

CREATE TABLE public.categories (
  id character varying NOT NULL,
  name text NOT NULL,
  weight integer NULL DEFAULT 0,
  price integer NULL DEFAULT 0,
  markup_percent numeric(5,2) NULL DEFAULT 0,
  retail_price numeric GENERATED ALWAYS AS (
    ceil(
      (
        (price)::numeric + (
          ((price)::numeric * markup_percent) / (100)::numeric
        )
      )
    )
  ) STORED,
  CONSTRAINT categories_pkey PRIMARY KEY (id)
);

CREATE TABLE public.customers (
  id serial NOT NULL,
  name text NOT NULL,
  email text NULL,
  phone text NULL,
  address text NULL,
  CONSTRAINT customers_pkey PRIMARY KEY (id)
);

CREATE UNIQUE INDEX IF NOT EXISTS customers_email_key ON public.customers USING btree (email);

CREATE TABLE public.flavours (
  id character varying NOT NULL,
  name text NOT NULL,
  CONSTRAINT flavours_pkey PRIMARY KEY (id)
);

CREATE TABLE public.products (
  id character varying NOT NULL,
  title text NOT NULL,
  category_id character varying NULL,
  flavour_id character varying NULL,
  price integer NULL,
  preview_image text NULL,
  description text NULL,
  weight integer NULL,
  is_active boolean NOT NULL DEFAULT true,
  CONSTRAINT products_pkey PRIMARY KEY (id),
  CONSTRAINT products_category_id_fkey FOREIGN KEY (category_id) REFERENCES categories (id),
  CONSTRAINT products_flavour_id_fkey FOREIGN KEY (flavour_id) REFERENCES flavours (id)
);

CREATE TABLE public.special_products (
  id character varying NOT NULL,
  title text NOT NULL,
  weight integer NOT NULL,
  price integer NOT NULL,
  preview_image text NULL,
  CONSTRAINT special_products_pkey PRIMARY KEY (id),
  CONSTRAINT special_products_id_fkey FOREIGN KEY (id) REFERENCES products (id) ON DELETE CASCADE
);

CREATE TABLE public.orders (
  number serial NOT NULL,
  id character varying NULL,
  customer_id integer NULL,
  date timestamp without time zone NULL DEFAULT CURRENT_TIMESTAMP,
  delivery_method text NULL,
  status text NULL DEFAULT 'нове'::text,
  total integer NULL,
  payment_method text NULL,
  is_wholesale boolean NULL DEFAULT false,
  invoice_id character varying(20) NULL,
  CONSTRAINT orders_pkey PRIMARY KEY (number),
  CONSTRAINT orders_customer_id_fkey FOREIGN KEY (customer_id) REFERENCES customers (id)
);

CREATE UNIQUE INDEX IF NOT EXISTS orders_order_id_key ON public.orders USING btree (id);

CREATE TABLE public.order_delivery_details (
  order_number integer NOT NULL,
  delivery_service character varying(100) NULL,
  delivery_type character varying(50) NULL,
  branch_number character varying(100) NULL,
  full_address text NULL,
  city character varying(100) NULL,
  CONSTRAINT order_delivery_details_pkey PRIMARY KEY (order_number),
  CONSTRAINT order_delivery_details_order_id_fkey FOREIGN KEY (order_number) REFERENCES orders (number)
);

CREATE TABLE public.orderitems (
  id serial NOT NULL,
  order_id character varying NULL,
  product_id character varying NULL,
  quantity integer NOT NULL,
  CONSTRAINT orderitems_pkey PRIMARY KEY (id),
  CONSTRAINT orderitems_order_id_fkey FOREIGN KEY (order_id) REFERENCES orders (id),
  CONSTRAINT orderitems_product_id_fkey FOREIGN KEY (product_id) REFERENCES products (id)
);

-- === SAMPLE DATA (inserts) ===

-- Categories: id values are strings to match character varying
-- INSERT INTO public.categories (id, name, weight, price, markup_percent) VALUES
-- ('1', 'Mini', 15, 0, 0),
-- ('2', 'Popular', 30, 0, 0),
-- ('3', 'Nutty', 30, 0, 0),
-- ('4', 'Heart', 8, 0, 0),
-- ('5', 'Sugar Free', 25, 0, 0),
-- ('6', 'Big', 85, 0, 0);
INSERT INTO "public"."categories" ("id", "name", "weight", "price", "markup_percent") VALUES
('1', 'Mini', '15', '18', '35.00'),
('2', 'Popular', '30', '29', '35.00'),
('3', 'Nutty', '30', '34', '35.00'),
('4', 'Heart', '10', '13', '35.00'),
('5', 'Sugar Free', '25', '34', '35.00'),
('6', 'Big', '85', '98', '35.00'),
('7', 'Kiss', '8', '13', '35.00'),
('8', 'Special', '0', '0', '35.00');

-- Flavours
-- INSERT INTO public.flavours (id, name) VALUES
-- ('1', 'ПРАПОР'),
-- ('2', 'ОРЕО'),
-- ('3', 'КОКОС'),
-- ('4', 'ВАНІЛЬ'),
-- ('5', 'МАТЧА-МАЛИНА'),
-- ('6', 'ПОЛУНИЦЯ'),
-- ('7', 'АПЕЛЬСИН'),
-- ('8', 'ЛАЙМ'),
-- ('9', 'ЯГОДА'),
-- ('10', 'ЧОРНА'),
-- ('11', 'МОЛОЧНА'),
-- ('12', 'ТОФІ'),
-- ('13', 'ДИНЯ'),
-- ('14', 'БІЛА'),
-- ('15', 'ВЕСНЯНА');

INSERT INTO "public"."flavours" ("id", "name") VALUES 
('1', 'ПРАПОР'), 
('10', 'ЧОРНА'), 
('11', 'МОЛОЧНА'), 
('12', 'ТОФІ'), 
('13', 'ДИНЯ'), 
('14', 'БІЛА'), 
('15', 'ВЕСНЯНА'), 
('16', 'Дубайська'), 
('17', 'Волохата'), 
('18', 'Черрі Паті'), 
('19', 'Журавлина з коньяком'), 
('2', 'ОРЕО'), 
('3', 'КОКОС'), 
('4', 'ВАНІЛЬ'), 
('5', 'МАТЧА-МАЛИНА'), 
('6', 'ПОЛУНИЦЯ'), 
('7', 'АПЕЛЬСИН'), 
('8', 'ЛАЙМ'), 
('9', 'ЯГОДА');

-- Products (id quoted strings). Some optional fields left NULL.
-- INSERT INTO public.products (id, title, category_id, price, flavour_id, preview_image, description, weight, is_active) VALUES
-- ('1-001', 'Шоколадка "Міні" 15г "ПРАПОР"', '1', 17, '1', NULL, NULL, 15, true),
-- ('1-002', 'Шоколадка "Міні" 15г "ОРЕО"', '1', 17, '2', NULL, NULL, 15, true),
-- ('1-003', 'Шоколадка "Міні" 15г "КОКОС"', '1', 17, '3', NULL, NULL, 15, true),
-- ('1-004', 'Шоколадка "Міні" 15г "ВАНІЛЬ"', '1', 17, '4', NULL, NULL, 15, true),
-- ('1-005', 'Шоколадка "Міні" 15г "МАТЧА-МАЛИНА"', '1', 17, '5', NULL, NULL, 15, true),
-- ('1-006', 'Шоколадка "Міні" 15г "ПОЛУНИЦЯ"', '1', 17, '6', NULL, NULL, 15, true),
-- ('1-007', 'Шоколадка "Міні" 15г "АПЕЛЬСИН"', '1', 17, '7', NULL, NULL, 15, true),
-- ('1-008', 'Шоколадка "Міні" 15г "ЛАЙМ"', '1', 17, '8', NULL, NULL, 15, true),
-- ('1-009', 'Шоколадка "Міні" 15г "ЯГОДА"', '1', 17, '9', NULL, NULL, 15, true),
-- ('1-010', 'Шоколадка "Міні" 15г "ЧОРНА"', '1', 17, '10', NULL, NULL, 15, true),
-- ('1-011', 'Шоколадка "Міні" 15г "МОЛОЧНА"', '1', 17, '11', NULL, NULL, 15, true),
-- ('1-012', 'Шоколадка "Міні" 15г "ТОФІ"', '1', 17, '12', NULL, NULL, 15, true),

-- ('2-001', 'Шоколадка "Популярна" 30г "ПРАПОР"', '2', 28, '1', NULL, NULL, 30, true),
-- ('2-002', 'Шоколадка "Популярна" 30г "ОРЕО"', '2', 28, '2', NULL, NULL, 30, true),
-- ('2-003', 'Шоколадка "Популярна" 30г "КОКОС"', '2', 28, '3', NULL, NULL, 30, true),
-- ('2-004', 'Шоколадка "Популярна" 30г "ВАНІЛЬ"', '2', 28, '4', NULL, NULL, 30, true),
-- ('2-005', 'Шоколадка "Популярна" 30г "МАТЧА-МАЛИНА"', '2', 28, '5', NULL, NULL, 30, true),
-- ('2-006', 'Шоколадка "Популярна" 30г "ПОЛУНИЦЯ"', '2', 28, '6', NULL, NULL, 30, true),
-- ('2-007', 'Шоколадка "Популярна" 30г "АПЕЛЬСИН"', '2', 28, '7', NULL, NULL, 30, true),
-- ('2-008', 'Шоколадка "Популярна" 30г "ЛАЙМ"', '2', 28, '8', NULL, NULL, 30, true),
-- ('2-009', 'Шоколадка "Популярна" 30г "ЯГОДА"', '2', 28, '9', NULL, NULL, 30, true),
-- ('2-010', 'Шоколадка "Популярна" 30г "ЧОРНА"', '2', 28, '10', NULL, NULL, 30, true),
-- ('2-011', 'Шоколадка "Популярна" 30г "МОЛОЧНА"', '2', 28, '11', NULL, NULL, 30, true),
-- ('2-012', 'Шоколадка "Популярна" 30г "ТОФІ"', '2', 28, '12', NULL, NULL, 30, true),

-- ('3-001', 'Шоколадка з горіхом 30г "ПРАПОР"', '3', 33, '1', NULL, NULL, 30, true),
-- ('3-002', 'Шоколадка з горіхом 30г "ОРЕО"', '3', 33, '2', NULL, NULL, 30, true),
-- ('3-003', 'Шоколадка з горіхом 30г "КОКОС"', '3', 33, '3', NULL, NULL, 30, true),
-- ('3-004', 'Шоколадка з горіхом 30г "ВАНІЛЬ"', '3', 33, '4', NULL, NULL, 30, true),
-- ('3-005', 'Шоколадка з горіхом 30г "МАТЧА-МАЛИНА"', '3', 33, '5', NULL, NULL, 30, true),
-- ('3-006', 'Шоколадка з горіхом 30г "ПОЛУНИЦЯ"', '3', 33, '6', NULL, NULL, 30, true),
-- ('3-007', 'Шоколадка з горіхом 30г "АПЕЛЬСИН"', '3', 33, '7', NULL, NULL, 30, true),
-- ('3-008', 'Шоколадка з горіхом 30г "ЛАЙМ"', '3', 33, '8', NULL, NULL, 30, true),
-- ('3-009', 'Шоколадка з горіхом 30г "ЯГОДА"', '3', 33, '9', NULL, NULL, 30, true),
-- ('3-010', 'Шоколадка з горіхом 30г "ЧОРНА"', '3', 33, '10', NULL, NULL, 30, true),
-- ('3-011', 'Шоколадка з горіхом 30г "МОЛОЧНА"', '3', 33, '11', NULL, NULL, 30, true),
-- ('3-012', 'Шоколадка з горіхом 30г "ТОФІ"', '3', 33, '12', NULL, NULL, 30, true),

-- ('4-001', 'Шоколадка "Сердечко" 8г "ОРЕО"', '4', 13, '2', NULL, NULL, 8, true),
-- ('4-002', 'Шоколадка "Сердечко" 8г "КОКОС"', '4', 13, '3', NULL, NULL, 8, true),
-- ('4-003', 'Шоколадка "Сердечко" 8г "ВАНІЛЬ"', '4', 13, '4', NULL, NULL, 8, true),
-- ('4-004', 'Шоколадка "Сердечко" 8г "МАТЧА-МАЛИНА"', '4', 13, '5', NULL, NULL, 8, true),
-- ('4-005', 'Шоколадка "Сердечко" 8г "ПОЛУНИЦЯ"', '4', 13, '6', NULL, NULL, 8, true),
-- ('4-006', 'Шоколадка "Сердечко" 8г "АПЕЛЬСИН"', '4', 13, '7', NULL, NULL, 8, true),
-- ('4-007', 'Шоколадка "Сердечко" 8г "ЛАЙМ"', '4', 13, '8', NULL, NULL, 8, true),
-- ('4-008', 'Шоколадка "Сердечко" 8г "ЯГОДА"', '4', 13, '9', NULL, NULL, 8, true),
-- ('4-009', 'Шоколадка "Сердечко" 8г "ЧОРНА"', '4', 13, '10', NULL, NULL, 8, true),
-- ('4-010', 'Шоколадка "Сердечко" 8г "МОЛОЧНА"', '4', 13, '11', NULL, NULL, 8, true),
-- ('4-011', 'Шоколадка "Сердечко" 8г "ТОФІ"', '4', 13, '12', NULL, NULL, 8, true),

-- ('5-001', 'Шоколадка "Без цукру " 25г "ТОФІ"', '5', 33, '12', NULL, NULL, 25, true),
-- ('5-002', 'Шоколадка "Без цукру " 25г "ДИНЯ"', '5', 33, '13', NULL, NULL, 25, true),
-- ('5-003', 'Шоколадка "Без цукру " 25г "КОКОС"', '5', 33, '3', NULL, NULL, 25, true),
-- ('5-004', 'Шоколадка "Без цукру " 25г "БІЛА"', '5', 33, '14', NULL, NULL, 25, true),
-- ('5-005', 'Шоколадка "Без цукру " 25г "ВЕСНЯНА"', '5', 33, '15', NULL, NULL, 25, true),

-- ('6-001', 'Шоколадка "Велика" 85г "ПРАПОР"', '6', 97, '1', NULL, NULL, 85, true),
-- ('6-002', 'Шоколадка "Велика" 85г "ОРЕО"', '6', 97, '2', NULL, NULL, 85, true),
-- ('6-003', 'Шоколадка "Велика" 85г "КОКОС"', '6', 97, '3', NULL, NULL, 85, true),
-- ('6-004', 'Шоколадка "Велика" 85г "ВАНІЛЬ"', '6', 97, '4', NULL, NULL, 85, true),
-- ('6-005', 'Шоколадка "Велика" 85г "МАТЧА-МАЛИНА"', '6', 97, '5', NULL, NULL, 85, true),
-- ('6-006', 'Шоколадка "Велика" 85г "ПОЛУНИЦЯ"', '6', 97, '6', NULL, NULL, 85, true),
-- ('6-007', 'Шоколадка "Велика" 85г "АПЕЛЬСИН"', '6', 97, '7', NULL, NULL, 85, true),
-- ('6-008', 'Шоколадка "Велика" 85г "ЛАЙМ"', '6', 97, '8', NULL, NULL, 85, true),
-- ('6-009', 'Шоколадка "Велика" 85г "ЯГОДА"', '6', 97, '9', NULL, NULL, 85, true),
-- ('6-010', 'Шоколадка "Велика" 85г "ЧОРНА"', '6', 97, '10', NULL, NULL, 85, true),
-- ('6-011', 'Шоколадка "Велика" 85г "МОЛОЧНА"', '6', 97, '11', NULL, NULL, 85, true),
-- ('6-012', 'Шоколадка "Велика" 85г "ТОФІ"', '6', 97, '12', NULL, NULL, 85, true);
INSERT INTO
    "public"."products" (
        "id",
        "title",
        "category_id",
        "flavour_id",
        "price",
        "preview_image",
        "description",
        "weight",
        "is_active"
    )
VALUES (
        '1-001',
        'Шоколадка "Міні" 15г "ПРАПОР"',
        '1',
        '1',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Mini/ПРАПОР/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки, поділений на дві рівномірні частини блакитного (основа - білий шоколад) та жовтого кольору (основа - білий шоколад). Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, кокосова стружка. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '1-002',
        'Шоколадка "Міні" 15г "ОРЕО"',
        '1',
        '2',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Mini/ОРЕО/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокунтої плитки. Колір: білий з чорними вкрапленнями. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, печиво "Орео". Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '1-003',
        'Шоколадка "Міні" 15г "КОКОС"',
        '1',
        '3',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Mini/КОКОС/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: блакитний. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, кокосова стружка. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '1-004',
        'Шоколадка "Міні" 15г "ВАНІЛЬ"',
        '1',
        '4',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Mini/ВАНІЛЬ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: жовтий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '1-005',
        'Шоколадка "Міні" 15г "МАТЧА-МАЛИНА"',
        '1',
        '5',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Mini/МАТЧА-МАЛИНА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки, посипаний сублімованою малиною. Колір: зелений. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, чай матча. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '1-006',
        'Шоколадка "Міні" 15г "ПОЛУНИЦЯ"',
        '1',
        '6',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Mini/ПОЛУНИЦЯ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки, посипаний сублімованою полуницею. Колір: білий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту 570 ккал.',
        null,
        'true'
    ),
    (
        '1-007',
        'Шоколадка "Міні" 15г "АПЕЛЬСИН"',
        '1',
        '7',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Mini/АПЕЛЬСИН/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: помаранчевий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Апельсин", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '1-008',
        'Шоколадка "Міні" 15г "ЛАЙМ"',
        '1',
        '8',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Mini/ЛАЙМ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: зелений. Склад: шоколад білий
(какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Лайм", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '1-009',
        'Шоколадка "Міні" 15г "ЯГОДА"',
        '1',
        '9',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Mini/ЯГОДА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки, поділений на дві рівномірні частини рожевого (основа - білий шоколад) та коричневого кольору (основа - чорний шоколад). Склад:
какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин, натуральний ароматизатор "Ваніль", "Ягода", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '1-010',
        'Шоколадка "Міні" 15г "ЧОРНА"',
        '1',
        '10',
        '24',
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Mini/ЧОРНА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: темно-коричневий. Склад: шоколад чорний (какао терте, цукор, какао порошок зі зниженим вмістом жиру, емульгатор соєвий лецитин). Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '1-011',
        'Шоколадка "Міні" 15г "МОЛОЧНА"',
        '1',
        '11',
        '24',
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Mini/МОЛОЧНА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: коричневий. Склад: шоколад молочний (какао терте, масло какао, цукор, сухе молоко, суха молочна сироватка, соєвий лецитин), ароматизатор "Ваніль". Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '1-012',
        'Шоколадка "Міні" 15г "ТОФІ"',
        '1',
        '12',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Mini/ТОФІ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: червоний. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Тофі", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту 570 ккал.',
        null,
        'true'
    ),
    (
        '2-001',
        'Шоколадка "Популярна" 30г "ПРАПОР"',
        '2',
        '1',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Popular/ПРАПОР/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки, поділений на дві рівномірні частини блакитного (основа - білий шоколад) та жовтого кольору (основа - білий шоколад). Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, кокосова стружка. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '2-002',
        'Шоколадка "Популярна" 30г "ОРЕО"',
        '2',
        '2',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Popular/ОРЕО/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокунтої плитки. Колір: білий з чорними вкрапленнями. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, печиво "Орео". Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '2-003',
        'Шоколадка "Популярна" 30г "КОКОС"',
        '2',
        '3',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Popular/КОКОС/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: блакитний. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, кокосова стружка. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '2-004',
        'Шоколадка "Популярна" 30г "ВАНІЛЬ"',
        '2',
        '4',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Popular/ВАНІЛЬ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: жовтий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '2-005',
        'Шоколадка "Популярна" 30г "МАТЧА-МАЛИНА"',
        '2',
        '5',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Popular/МАТЧА-МАЛИНА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки, посипаний сублімованою малиною. Колір: зелений. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, чай матча. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '2-006',
        'Шоколадка "Популярна" 30г "ПОЛУНИЦЯ"',
        '2',
        '6',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Popular/ПОЛУНИЦЯ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки, посипаний сублімованою полуницею. Колір: білий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту 570 ккал.
',
        null,
        'true'
    ),
    (
        '2-007',
        'Шоколадка "Популярна" 30г "АПЕЛЬСИН"',
        '2',
        '7',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Popular/АПЕЛЬСИН/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: помаранчевий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Апельсин", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '2-008',
        'Шоколадка "Популярна" 30г "ЛАЙМ"',
        '2',
        '8',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Popular/ЛАЙМ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: зелений. Склад: шоколад білий
(какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Лайм", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.

',
        null,
        'true'
    ),
    (
        '2-009',
        'Шоколадка "Популярна" 30г "ЯГОДА"',
        '2',
        '9',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Popular/ЯГОДА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки, поділений на дві рівномірні частини рожевого (основа - білий шоколад) та коричневого кольору (основа - чорний шоколад). Склад:
какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин, натуральний ароматизатор "Ваніль", "Ягода", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '2-010',
        'Шоколадка "Популярна" 30г "ЧОРНА"',
        '2',
        '10',
        '36',
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Popular/ЧОРНА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: темно-коричневий. Склад: шоколад чорний (какао терте, цукор, какао порошок зі зниженим вмістом жиру, емульгатор соєвий лецитин). Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '2-011',
        'Шоколадка "Популярна" 30г "МОЛОЧНА"',
        '2',
        '11',
        '36',
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Popular/МОЛОЧНА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: коричневий. Склад: шоколад молочний (какао терте, масло какао, цукор, сухе молоко, суха молочна сироватка, соєвий лецитин), ароматизатор "Ваніль". Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '2-012',
        'Шоколадка "Популярна" 30г "ТОФІ"',
        '2',
        '12',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Popular/ТОФІ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: червоний. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Тофі", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту 570 ккал.',
        null,
        'true'
    ),
    (
        '3-001',
        'Шоколадка з горіхом 30г "ПРАПОР"',
        '3',
        '1',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Nutty/ПРАПОР/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді смужки з кульками, поділений на дві рівномірні частини блакитного (основа - білий шоколад) та жовтого кольору (основа - білий шоколад). Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, мигдаль, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, кокосова стружка. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '3-002',
        'Шоколадка з горіхом 30г "ОРЕО"',
        '3',
        '2',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Nutty/ОРЕО/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді смужки з кульками. Колір: білий з чорними вкрапленнями. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, мигдаль, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, печиво "Орео". Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '3-003',
        'Шоколадка з горіхом 30г "КОКОС"',
        '3',
        '3',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Nutty/КОКОС/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді смужки з кульками. Колір: блакитний. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, мигдаль, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, кокосова стружка. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '3-004',
        'Шоколадка з горіхом 30г "ВАНІЛЬ"',
        '3',
        '4',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Nutty/ВАНІЛЬ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді  смужки з кульками. Колір: жовтий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, мигдаль, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '3-005',
        'Шоколадка з горіхом 30г "МАТЧА-МАЛИНА"',
        '3',
        '5',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Nutty/МАТЧА-МАЛИНА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді смужки з кульками, посипаний сублімованою малиною. Колір: зелений. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), мигдаль, натуральний ароматизатор "Ваніль", фарбник Е160е, чай матча. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '3-006',
        'Шоколадка з горіхом 30г "ПОЛУНИЦЯ"',
        '3',
        '6',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Nutty/ПОЛУНИЦЯ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді смужки з кульками, посипаний сублімованою полуницею. Колір: білий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, мигдаль, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту 570 ккал.
',
        null,
        'true'
    ),
    (
        '3-007',
        'Шоколадка з горіхом 30г "АПЕЛЬСИН"',
        '3',
        '7',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Nutty/АПЕЛЬСИН/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді смужки з кульками. Колір: помаранчевий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Апельсин", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '3-008',
        'Шоколадка з горіхом 30г "ЛАЙМ"',
        '3',
        '8',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Nutty/ЛАЙМ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді смужки з кульками. Колір: зелений. Склад: шоколад білий
(какао масло, цукор, сухе незбиране молоко, мигдаль, емульгатор соєвий лецетин), натуральний ароматизатор "Лайм", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.

',
        null,
        'true'
    ),
    (
        '3-009',
        'Шоколадка з горіхом 30г "ЯГОДА"',
        '3',
        '9',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Nutty/ЯГОДА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді смужки з кульками. Колір: Склад:
какао масло, цукор, сухе незбиране молоко, мигдаль, емульгатор соєвий лецетин, натуральний ароматизатор "Ваніль", "Ягода", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '3-010',
        'Шоколадка з горіхом 30г "ЧОРНА"',
        '3',
        '10',
        '37',
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Nutty/ЧОРНА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді смужки з кульками. Колір: темно-коричневий. Склад: шоколад чорний (какао терте, цукор, какао порошок зі зниженим вмістом жиру, емульгатор соєвий лецитин). Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '3-011',
        'Шоколадка з горіхом 30г "МОЛОЧНА"',
        '3',
        '11',
        '37',
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Nutty/МОЛОЧНА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді смужки з кульками. Колір: коричневий. Склад: шоколад молочний (какао терте, масло какао, цукор, сухе молоко, мигдаль, суха молочна сироватка, соєвий лецитин), ароматизатор "Ваніль". Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.
',
        null,
        'true'
    ),
    (
        '3-012',
        'Шоколадка з горіхом 30г "ТОФІ"',
        '3',
        '12',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Nutty/ТОФІ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді смужки з кульками. Колір: червоний. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, мигдаль, емульгатор соєвий лецетин), натуральний ароматизатор "Тофі", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту 570 ккал.
',
        null,
        'true'
    ),
    (
        '4-001',
        'Шоколадка "Сердечко" 10г "ОРЕО"',
        '4',
        '2',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Heart/ОРЕО/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді сердечка. Колір: білий з чорними вкрапленнями. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, печиво "Орео". Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '4-002',
        'Шоколадка "Сердечко" 10г "КОКОС"',
        '4',
        '3',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Heart/КОКОС/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді сердечка. Колір: блакитний. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, кокосова стружка. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '4-003',
        'Шоколадка "Сердечко" 10г "ВАНІЛЬ"',
        '4',
        '4',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Heart/ВАНІЛЬ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді сердечка. Колір: жовтий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '4-004',
        'Шоколадка "Сердечко" 10г "МАТЧА-МАЛИНА"',
        '4',
        '5',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Heart/МАТЧА-МАЛИНА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді сердечка, посипаний сублімованою малиною. Колір: зелений. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, чай матча. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '4-005',
        'Шоколадка "Сердечко" 10г "ПОЛУНИЦЯ"',
        '4',
        '6',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Heart/ПОЛУНИЦЯ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді сердечка, посипаний сублімованою полуницею. Колір: білий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту 570 ккал.',
        null,
        'true'
    ),
    (
        '4-006',
        'Шоколадка "Сердечко" 10г "АПЕЛЬСИН"',
        '4',
        '7',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Heart/АПЕЛЬСИН/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді сердечка. Колір: помаранчевий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Апельсин", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '4-007',
        'Шоколадка "Сердечко" 10г "ЛАЙМ"',
        '4',
        '8',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Heart/ЛАЙМ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді сердечка. Колір: зелений. Склад: шоколад білий
(какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор ""Лайм"", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '4-008',
        'Шоколадка "Сердечко" 10г "ЯГОДА"',
        '4',
        '9',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Heart/ЯГОДА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді сердечка. Склад: какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин, натуральний ароматизатор "Ваніль", "Ягода", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '4-009',
        'Шоколадка "Сердечко" 10г "ЧОРНА"',
        '4',
        '10',
        '15',
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Heart/ЧОРНА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді сердечко. Колір: темно-коричневий. Склад: шоколад чорний (какао терте, цукор, какао порошок зі зниженим вмістом жиру, емульгатор соєвий лецитин). Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '4-010',
        'Шоколадка "Сердечко" 10г "МОЛОЧНА"',
        '4',
        '11',
        '15',
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Heart/МОЛОЧНА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді сердечко. Колір: коричневий. Склад: шоколад молочний (какао терте, масло какао, цукор, сухе молоко, суха молочна сироватка, соєвий лецитин), ароматизатор "Ваніль". Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '4-011',
        'Шоколадка "Сердечко" 10г "ТОФІ"',
        '4',
        '12',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Heart/ТОФІ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді сердечко. Колір: червоний. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Тофі", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту 570 ккал.',
        null,
        'true'
    ),
    (
        '5-001',
        'Шоколадка "Без цукру " 25г "ТОФІ"',
        '5',
        '12',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Sugar_Free/ТОФІ/preview.jpg',
        'Зовнішній вигляд: шоколадний батончик по формі складається з 5-ти з''єднаних кульок. Склад: шоколад білий (какао масло, сухе незбиране молоко, підсолоджувач: мальтітол), натуральний ароматизатор "Тоффі", "Ваніль", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 480 ккал',
        null,
        'true'
    ),
    (
        '5-002',
        'Шоколадка "Без цукру " 25г "ДИНЯ"',
        '5',
        '13',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Sugar_Free/ДИНЯ/preview.jpg',
        'Зовнішній вигляд: шоколадний батончик по формі складається з 5-ти з''єднаних кульок. Склад: шоколад білий (какао масло, сухе незбиране молоко, підсолоджувач: мальтітол), натуральний ароматизатор "Диня", "Ваніль", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 480 ккал',
        null,
        'true'
    ),
    (
        '5-003',
        'Шоколадка "Без цукру " 25г "КОКОС"',
        '5',
        '3',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Sugar_Free/КОКОС/preview.jpg',
        'Зовнішній вигляд: шоколадний батончик по формі складається з 5-ти з''єднаних кульок. Склад: шоколад білий (какао масло, сухе незбиране молоко, підсолоджувач: мальтітол), натуральний ароматизатор "Ваніль", фарбник Е160е, кокосова стружка. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 480 ккал.',
        null,
        'true'
    ),
    (
        '5-004',
        'Шоколадка "Без цукру " 25г "БІЛА"',
        '5',
        '14',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Sugar_Free/БІЛА/preview.jpg',
        'Зовнішній вигляд: шоколадний батончик по формі складається з 5-ти з''єднаних кульок. Склад: шоколад білий (какао масло, сухе незбиране молоко, підсолоджувач: мальтітол), натуральний ароматизатор "Ваніль". Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 480 ккал',
        null,
        'true'
    ),
    (
        '5-005',
        'Шоколадка "Без цукру " 25г "ВЕСНЯНА"',
        '5',
        '15',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Sugar_Free/ВЕСНЯНА/preview.jpg',
        'Зовнішній вигляд: шоколадний батончик по формі складається з 5-ти з''єднаних кульок. Склад: шоколад білий (какао масло, сухе незбиране молоко, підсолоджувач: мальтітол), натуральний ароматизатор "Тоффі", "Ваніль", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 480 ккал',
        null,
        'true'
    ),
    (
        '6-001',
        'Шоколадка "Велика" 85г "ПРАПОР"',
        '6',
        '1',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Big/ПРАПОР/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки, поділений на дві рівномірні частини блакитного (основа - білий шоколад) та жовтого кольору (основа - білий шоколад). Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, кокосова стружка. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '6-002',
        'Шоколадка "Велика" 85г "ОРЕО"',
        '6',
        '2',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Big/ОРЕО/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокунтої плитки. Колір: білий з чорними вкрапленнями. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, печиво "Орео". Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '6-003',
        'Шоколадка "Велика" 85г "КОКОС"',
        '6',
        '3',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Big/КОКОС/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: блакитний. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, кокосова стружка. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '6-004',
        'Шоколадка "Велика" 85г "ВАНІЛЬ"',
        '6',
        '4',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Big/ВАНІЛЬ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: жовтий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '6-005',
        'Шоколадка "Велика" 85г "МАТЧА-МАЛИНА"',
        '6',
        '5',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Big/МАТЧА-МАЛИНА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки, посипаний сублімованою малиною. Колір: зелений. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, чай матча. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '6-006',
        'Шоколадка "Велика" 85г "ПОЛУНИЦЯ"',
        '6',
        '6',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Big/ПОЛУНИЦЯ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки, посипаний сублімованою полуницею. Колір: білий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту 570 ккал.',
        null,
        'true'
    ),
    (
        '6-007',
        'Шоколадка "Велика" 85г "АПЕЛЬСИН"',
        '6',
        '7',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Big/АПЕЛЬСИН/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: помаранчевий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Апельсин", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '6-008',
        'Шоколадка "Велика" 85г "ЛАЙМ"',
        '6',
        '8',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Big/ЛАЙМ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: зелений. Склад: шоколад білий
(какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор ""Лайм"", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '6-009',
        'Шоколадка "Велика" 85г "ЯГОДА"',
        '6',
        '9',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Big/ЯГОДА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки, поділений на дві рівномірні частини рожевого (основа - білий шоколад) та коричневого кольору (основа - чорний шоколад). Склад:
какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин, натуральний ароматизатор ""Ваніль"", ""Ягода"", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '6-012',
        'Шоколадка "Велика" 85г "ТОФІ"',
        '6',
        '12',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Big/ТОФІ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді прямокутної плитки. Колір: червоний. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Тофі", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту 570 ккал.',
        null,
        'true'
    ),
    (
        '7-001',
        'Шоколадка "Поцілунки" 8г "ОРЕО"',
        '7',
        '2',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Kiss/ОРЕО/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді поцілунку. Колір: білий з чорними вкрапленнями. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, печиво "Орео". Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '7-002',
        'Шоколадка "Поцілунки" 8г "КОКОС"',
        '7',
        '3',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Kiss/КОКОС/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді поцілунку. Колір: блакитний. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, кокосова стружка. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '7-003',
        'Шоколадка "Поцілунки" 8г "ВАНІЛЬ"',
        '7',
        '4',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Kiss/ВАНІЛЬ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді поцілунку. Колір: жовтий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '7-004',
        'Шоколадка "Поцілунки" 8г "МАТЧА-МАЛИНА"',
        '7',
        '5',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Kiss/МАТЧА-МАЛИНА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді поцілунку, посипаний сублімованою малиною. Колір: зелений. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е, чай матча. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '7-005',
        'Шоколадка "Поцілунки" 8г "ПОЛУНИЦЯ"',
        '7',
        '6',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Kiss/ПОЛУНИЦЯ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді поцілунку, посипаний сублімованою полуницею. Колір: білий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Ваніль", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту 570 ккал.',
        null,
        'true'
    ),
    (
        '7-006',
        'Шоколадка "Поцілунки" 8г "АПЕЛЬСИН"',
        '7',
        '7',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Kiss/АПЕЛЬСИН/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді поцілунку. Колір: помаранчевий. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Апельсин", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '7-007',
        'Шоколадка "Поцілунки" 8г "ЛАЙМ"',
        '7',
        '8',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Kiss/ЛАЙМ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді поцілунку. Колір: зелений. Склад: шоколад білий
(какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор ""Лайм"", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '7-008',
        'Шоколадка "Поцілунки" 8г "ЯГОДА"',
        '7',
        '9',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Kiss/ЯГОДА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді поцілунку. Склад: какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин, натуральний ароматизатор "Ваніль", "Ягода", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '7-010',
        'Шоколадка "Поцілунки" 8г "МОЛОЧНА"',
        '7',
        '11',
        '15',
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Kiss/МОЛОЧНА/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді поцілунку. Колір: коричневий. Склад: шоколад молочний (какао терте, масло какао, цукор, сухе молоко, суха молочна сироватка, соєвий лецитин), ароматизатор "Ваніль". Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту - 570 ккал.',
        null,
        'true'
    ),
    (
        '7-011',
        'Шоколадка "Поцілунки" 8г "ТОФІ"',
        '7',
        '12',
        null,
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Kiss/ТОФІ/preview.jpg',
        'Зовнішній вигляд: шоколад у вигляді поцілунку. Колір: червоний. Склад: шоколад білий (какао масло, цукор, сухе незбиране молоко, емульгатор соєвий лецетин), натуральний ароматизатор "Тофі", фарбник Е160е. Поживна (харчова) цінність на 100 г продукту: білки - 6,0 г; жири - 35,0 г; вуглеводи - 56,0 г. Калорійність 100 г продукту 570 ккал.',
        null,
        'true'
    ),
    (
        '8-001',
        'Шоколадка "Особлива" 130г "Дубайська"',
        '8',
        '16',
        '250',
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Special/Дубайська/preview.jpg',
        null,
        '130',
        'true'
    ),
    (
        '8-002',
        'Шоколадка "Особлива" 130г  "Волохата"',
        '8',
        '17',
        '207',
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Special/Волохата/preview.jpg',
        null,
        '130',
        'true'
    ),
    (
        '8-003',
        'Шоколадка "Особлива" 35г  "Черрі Паті"',
        '8',
        '18',
        '38',
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Special/Черіпаті/preview.jpg',
        null,
        '35',
        'true'
    ),
    (
        '8-004',
        'Шоколадка "Особлива" 35г  "З коньяком та журавлиною"',
        '8',
        '19',
        '39',
        'https://9qy6ktzgsu2nlgvi.public.blob.vercel-storage.com/image-preview/Special/Журавлина_коньяк/Preview.JPG',
        null,
        '35',
        'true'
    );

-- === RPC / Stored functions ===

-- create_order(order_data jsonb) RETURNS TABLE(order_number int)
CREATE OR REPLACE FUNCTION public.create_order(order_data jsonb)
RETURNS TABLE(order_number int) 
LANGUAGE plpgsql
AS $$
declare
  full_name text;
  delivery_type text;
  customer_id int;
  inserted_order_number int;
begin
  full_name := trim(
    concat_ws(
      ' ',
      order_data->'checkoutSummary'->'contactInfo'->>'lastName',
      order_data->'checkoutSummary'->'contactInfo'->>'firstName',
      order_data->'checkoutSummary'->'contactInfo'->>'middleName'
    )
  );

  insert into customers (name, phone, email)
  values (
    full_name,
    order_data->'checkoutSummary'->'contactInfo'->>'phone',
    order_data->'checkoutSummary'->'contactInfo'->>'email'
  )
  on conflict (email) do update
  set name = excluded.name,
      phone = excluded.phone
  returning id into customer_id;

  insert into orders (
    id, customer_id, payment_method, delivery_method,
    is_wholesale, total, invoice_id
  )
  values (
    order_data->>'orderId', customer_id,
    order_data->'checkoutSummary'->'paymentInfo'->>'paymentMethod',
    order_data->'checkoutSummary'->'deliveryInfo'->>'deliveryMethod',
    (order_data->'checkoutSummary'->>'isWholesale')::boolean,
    (order_data->>'total')::integer,
    order_data->'checkoutSummary'->'paymentInfo'->>'invoiceId'
  )
  returning number into inserted_order_number;

  delivery_type := case
    when order_data->'checkoutSummary'->'deliveryInfo'->>'deliveryMethod' = 'branch' then 'Branch'
    else 'Address'
  end;

  insert into order_delivery_details (
    order_number, delivery_service, delivery_type,
    branch_number, full_address, city
  )
  values (
    inserted_order_number, 'Nova Poshta', delivery_type,
    order_data->'checkoutSummary'->'deliveryInfo'->>'branchNumber',
    order_data->'checkoutSummary'->'deliveryInfo'->>'address',
    order_data->'checkoutSummary'->'deliveryInfo'->'city'->>'Description'
  );

  insert into orderitems (order_id, product_id, quantity)
  select
    order_data->>'orderId',
    item->>'id',
    (item->>'quantity')::int
  from jsonb_array_elements(order_data->'items') as item;

  order_number := inserted_order_number;
  return next;
end;
$$;


-- get_all_products() RETURNS TABLE(...)
CREATE OR REPLACE FUNCTION public.get_all_products()
RETURNS TABLE(
  id text,
  title text,
  description text,
  wholesale_price integer,
  price integer,
  category text,
  weight integer,
  flavour text,
  preview text
)
LANGUAGE plpgsql
AS $$
begin
  return query
  select 
    p.id::text as id,
    p.title::text as title,
    p.description::text as description,
    COALESCE(p.price, c.price)::integer as wholesale_price,
    CASE 
      WHEN p.price IS NOT NULL THEN 
        CEIL(p.price + (p.price * c.markup_percent / 100))::integer
      ELSE 
        c.retail_price::integer
    END as price,
    c.name::text as category,
    COALESCE(p.weight, c.weight)::integer as weight,
    f.name::text as flavour,
    p.preview_image::text as preview
  from products p
  join categories c on p.category_id = c.id
  left join flavours f on p.flavour_id = f.id
  where p.is_active = true  
  order by p.id asc;
end;
$$;


-- get_order_summary(identifier text) RETURNS TABLE(...)
CREATE OR REPLACE FUNCTION public.get_order_summary(identifier text)
RETURNS TABLE(
  order_id text,
  number int,
  payment_method text,
  delivery_method text,
  status text,
  is_wholesale boolean,
  total numeric,
  customer_name text,
  customer_phone text,
  customer_email text,
  branch_number text,
  full_address text,
  city text
)
LANGUAGE plpgsql
AS $$
begin
  return query
  select
    o.id,
    o.number,
    o.payment_method,
    o.delivery_method,
    o.status,
    o.is_wholesale,
    o.total::numeric,
    c.name,
    c.phone,
    c.email,
    coalesce(d.branch_number, '')::text,
    coalesce(d.full_address, '')::text,
    coalesce(d.city, '')::text
  from orders o
  join customers c on o.customer_id = c.id
  left join order_delivery_details d on d.order_number = o.number
  where
    identifier is not null and
    (
      o.id = identifier
      or o.number::text = identifier
    )
  limit 1;
end;
$$;

-- End of dump.sql
